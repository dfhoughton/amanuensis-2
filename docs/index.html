<html lang="en">
  <!-- I was hoping to figure out how to use Jekyll to do what I wanted, but got impatient with the documentation. -->
  <head>
    <title>Amanuensis</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="images/owl16.ico" type="image/x-icon" />
    <!--
        hat tip to
        https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_grid_layout/Realizing_common_layouts_using_grids
        which got me going with the grid
    -->
    <style type="text/css">
      :root {
        --primary-color: #931f1d;
        --primary-light: oklch(from var(--primary-color) calc(l + 0.3) c h);
        --primary-very-light: oklch(
          from var(--primary-color) calc(l + 1.5) c h
        );
        --primary-dark: oklch(from var(--primary-color) calc(l * 0.75) c h);
        --secondary-color: rgb(80 116 235);
        --secondary-light: oklch(
          from var(--secondary-color) calc(l + 0.35) c h
        );
        --secondary-dark: oklch(from var(--secondary-color) calc(l * 0.75) c h);
      }
      body {
        font-family: Helvetica;
        margin: 0;
      }
      .head,
      .footer {
        color: #fff;
        background-color: var(--primary-color);
        padding: 1rem 2rem;
      }
      .footer {
        display: flex;
        flex-direction: row;
        gap: 1rem;
        justify-content: space-between;
        a {
          text-decoration: none;
          background-color: transparent;
          color: #fff;
          line-height: 1.5rem;
          padding: 0 0.5rem;
          border-radius: 0.75rem;
          &:hover,
          &:active,
          &:focus {
            background-color: #fff;
            color: var(--primary-color);
          }
        }
      }
      .m2 {
        margin-left: 0.75rem;
      }
      .m3 {
        margin-left: 1.5rem;
      }
      .m4 {
        margin-left: 2.25rem;
      }
      .m5 {
        margin-left: 3rem;
      }
      .m6 {
        margin-left: 3.75rem;
      }
      .toc-link {
        display: block;
      }
      .up-link {
        vertical-align: top;
        font-size: 12px;
        margin-left: 2px;
      }
      code {
        background-color: bisque;
      }
      .head {
        grid-area: header;
        display: flex;
        flex-direction: row;
        gap: 1rem;
        justify-content: space-between;
      }
      .side,
      .content {
        a {
          text-decoration: none;
          background-color: transparent;
          color: var(--secondary-dark);
          &:hover,
          &:active,
          &:focus {
            background-color: var(--secondary-color);
            color: #fff !important;
          }
          &:active,
          &:focus {
            background-color: var(--secondary-dark);
          }
          &:visited {
            color: var(--secondary-color);
          }
        }
      }
      .content {
        grid-area: content;
        padding-right: 2rem;
        h2,
        h3,
        h4,
        h5,
        h6 {
          color: var(--secondary-dark);
        }
        h5,
        h6 {
          font-size: 14px;
        }
      }
      .side {
        grid-area: sidebar;
      }
      .footer {
        grid-area: footer;
      }
      .wrapper {
        display: grid;
        grid-template-areas:
          "header"
          "sidebar"
          "content"
          "footer";
      }
      .fn {
        display: none;
      }
      .fn-anchor {
        position: relative;
        display: inline-block;
        min-width: 0.5rem;
        margin: 0 0.2rem;
      }
      .fn-tag {
        position: absolute;
        font-size: smaller;
        color: var(--secondary-dark);
        top: -1rem;
        z-index: 10;
        cursor: pointer;
        &:hover,
        &:focus,
        &:active {
          background-color: var(--secondary-color);
          color: #fff;
          border-radius: 0.5rem;
        }
      }
      .fn-text {
        position: relative;
        .fn-anchor {
          margin-top: 1.5rem;
        }
        .highlighted {
          background-color: var(--primary-very-light);
        }
      }
      #footnotes {
        margin-bottom: 1rem;
        hr {
          margin: 2rem 1.5rem;
          opacity: 25%;
        }
      }
      figure {
        padding: 0.5rem;
        max-width: 33%;
        float: right;
        img {
          max-width: 100%;
        }
        figcaption {
          font-style: italic;
          font-size: small;
          margin-top: 0.5rem;
        }
      }
      @media (min-width: 500px) {
        .wrapper {
          grid-template-columns: 1fr 3fr;
          grid-template-areas:
            "header  header"
            "sidebar content"
            "footer  footer";
        }
        .side {
          padding: 0 1rem;
        }
        .head,
        .footer {
          padding: 1rem 5rem;
        }
        .content {
          padding-right: 4rem;
        }
      }
      @media (min-width: 700px) {
        .wrapper {
          grid-template-columns: 1fr 5fr;
          grid-template-areas:
            "header  header"
            "sidebar content"
            "footer  footer";
        }
        .sidebar {
          padding-left: 2rem;
        }
        .head {
          h1 {
            font-size: 3rem;
            line-height: 3rem;
          }
        }
        .head,
        .footer {
          padding: 2rem 10rem;
        }
        .content {
          padding-right: 10rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <header class="head">
        <div>
          <h1>Amanuensis</h1>
          A language learning assistant.
        </div>
        <img src="images/owl128.png" alt="Amanuensis logo -- an owl" />
      </header>
      <nav class="side">
        <h2>Contents</h2>
        <div id="toc" />
      </nav>
      <article class="content">
        <h2>What is Amanuensis?</h2>
        <p>
          Amanuensis is a Chrome extension that facilitates taking notes on
          phrases you find as you browse the web. It captures the phrase, its
          context &mdash; the surrounding text &mdash; the time you recorded it,
          the URL, and any tags and notes, either on the phrase generally or
          particular citations. You can link notes together, edit them, merge
          them, search for them, export them, or import them from an export.
        </p>
        <p>
          In principal, you can use Amanuensis to take any sort of note. It was
          designed, however, with language learning in mind.
        </p>
        <h3>Use</h3>
        <p>
          The general pattern of usage: You're reading an article on something
          that interests you. You find a phrase of particular interest. If
          you're using Amanuensis to learn a language, it's an unfamiliar phrase
          or idiom. If you're using it as a research tool, it's a fact,
          observation, or data point. You highlight the phrase and click the
          Amanuensis icon or press ctrl-shift-A to start a note.<span class="fn"
            >If you are studying a language, you will need some other source to
            provide definitions, part of speech, etc. I find
            <a href="https://en.wiktionary.org/wiki/Wiktionary:Main_Page"
              >wiktionary</a
            >
            is a great resource. It provides you considerably more and more
            trustworthy information than you get from Google Translate, for
            instance.</span
          >
          You add relevant information, perhaps some tags; you look for similar
          or related notes and link them. You save it.
        </p>
        <p>
          Later, you wish to continue with an article. Say it's the last
          article. You click the icon or press ctrl-shift-A and open Amanuensis.
          You search, sorting for the most recently updated note. You click on
          the first note, then click on the URL. This takes you to the page,
          highlighting the phrase. You click on the search tab and see a list of
          all the notes you took on the page.
        </p>
        <h3>Philosophy</h3>
        <p>
          When people learn languages in a classroom, most context is removed.
          Words are learned in lists and are taught when the textbook or
          professor deems best, not when the student is interested. But learning
          facts unconnected to your interests is inefficient. If you don't
          already want to know the answer, the answer doesn't sink in.
        </p>
        <p>
          The idea with Amanuensis is that you find something which is
          inherently interesting to you and you try to read it. When you come
          across unfamiliar words, you will be more likely to remember them,
          because you <i>want</i> to know what they mean.
        </p>
        <p>
          When you come across the words again, and look them up again, as one
          does, you will be reminded of the last context in which you saw the
          word. The words will all hang together in a web of meaning and
          association.
        </p>
        <h3>Future</h3>
        <p>
          I have written Amanuensis because it is the language learning tool I
          want. I am sharing it because, having written it, it costs me nothing
          to do so.
        </p>
        <p>
          It is free. It will remain free. I have no plans to make money off of
          it.
        </p>
        <p>
          However, for the same reason I cannot guarantee it will be supported
          and developed forever. I will keep working on it as long as I have use
          for it. Since I love learning languages, I will keep at it for
          decades, as long as I keep my health. But Amanuensis has a bus number
          of one. If support drops off, something bad has happened. Still, I
          imagine it will keep working, just without additional bells and
          whistles.
        </p>
        <h2>Installation</h2>
        <p>
          For the time being the only way to install Amanuensis is to
          <a
            href="https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository"
            title="how to clone a repository"
            >clone the repository</a
          >, run the compile script, and
          <a
            href="https://developer.chrome.com/docs/extensions/get-started/tutorial/hello-world#load-unpacked"
            title="how to load an unpacked extension"
            >load the unpacked extension into chrome</a
          >.
        </p>
        <p>
          The respository is at
          <a href="https://github.com/dfhoughton/amanuensis-2"
            >https://github.com/dfhoughton/amanuensis-2</a
          >.<span class="fn"
            >Why "amanuensis-2"? Because there was an earlier version of this
            extension that worked with an earlier version of the Chrome
            extension spec. That version reached end of life and the extension
            died. This is a thorough rewrite. It is somewhat less ambitious but
            uses more modern tech.</span
          >
        </p>
        <p>
          To run the build script, you must have
          <a href="https://nodejs.org/en/download" title="how to install node"
            >installed node</a
          >. Then, in a terminal, cd to the install directory and run
          <code>npm run release-build</code>.
        </p>
        <p>
          Once things are more buttoned up I will submit Amanuensis to the
          chrome store. An earlier incarnation of it was there before. Then one
          will be able to install it as one does any chrome extension. The
          instructions above will continue to work.
        </p>
        <h2>Documentation</h2>
        <h3>Design Constraints</h3>
        <p>
          Amanuensis, like many extensions, lives in a little box in the top
          left corner of the screen. It needs to stay out of the way of the text
          you're reading, so everything needs to compact, minimal, abbreviated.
          We do what we can with tooltips and icons with familiar meanings, but
          if we had more real estate on the screen we would have made other
          choices.
        </p>
        <h3>Note</h3>
        <figure>
          <img src="images/note.png" alt="Amanuensis logo -- an owl" />
          <figcaption>
            A note: 1) lemma; 2) save icon; 3) language; 4) lemma note; 5) tags;
            6) links; 7) citation title; 8) citation date; 9) citation URL; 10)
            citation; 11) citation note; 12) citation tags
          </figcaption>
        </figure>
        <p>
          Notes are the basic unit of Amanuensis. Their creation is its central
          purpose. They collect information about citations. When you highlight
          a bit of text and invoke Amanuensis, it begins a new note for you.
        </p>
        <h4>lemma</h4>
        <p>
          A notes lemma is the canonical form of its various citations. If you
          are using Amanuensis to study English, the you would probably consider
          the lemma of <i>cats</i>, <i>cat's</i>, and <i>cat</i> to be
          <i>cat</i>.
        </p>
        <h4>save icon</h4>
        <p>Click this to save the note.</p>
        <h4>language</h4>
        <p>
          Amanuensis uses a Chrome API to guess the language of a particular
          citation from its content and context. There are many more languages
          than Google attempts to recognize, however, and it is not always
          correct in its guess. The language Google guesses is represented as a
          "locale", a two-letter identifier.
        </p>
        <p>
          To use this guess, you must specify in the configuration tab which
          <a href="#languages">languages</a> you are interested in. Amanuensis
          will attempt to map Google's guess onto these languages. The language
          selector allows you to edit this guess when Amanuensis gets it wrong.
        </p>
        <h4>lemma note</h4>
        <h4>tags</h4>
        <h4>links</h4>
        <h4>citations</h4>
        <h5>citation context</h5>
        <h6>title</h6>
        <h6>date</h6>
        <h6>URL</h6>
        <h5>citation note</h5>
        <h5>citation tags</h5>
        <h3>Dictionary</h3>
        <h4>search</h4>
        <h4>similar phrase</h4>
        <h4>citations on page</h4>
        <h3>Tags</h3>
        <h3>Configuration</h3>
        <h4>string distance metrics</h4>
        <h4>max similar phrases</h4>
        <h4>database actions</h4>
        <h5>clear</h5>
        <h5>export</h5>
        <h5>import</h5>
        <h4 id="languages">languages</h4>
        <h2>Dedication</h2>
        <p>
          Amanuensis, like most of my projects, is dedicated to my son Jude, who
          died on February 1st, 2023. He was a better programmer and a better,
          kinder, more interesting person than me. I was looking forwarde to
          being surprised and amazed by him as he went out into the world. He
          shared repositories in github under the name
          <a
            href="https://github.com/TurkeyMcMac"
            title="Jude's github repositories"
            >TurkeyMcMac</a
          >.
        </p>
        <p>We love you and miss you, Jude.</p>
        <div id="footnotes">
          <hr />
        </div>
      </article>
      <footer class="footer">
        <a
          href="https://github.com/dfhoughton/amanuensis-2"
          title="source repository"
          >https://github.com/dfhoughton/amanuensis-2</a
        >
        <a href="https://github.com/dfhoughton/amanuensis-2/blob/main/LICENSE"
          >License</a
        >
        <a
          href="https://dfhoughton.github.io"
          title="a random assortment of other things I've done"
          >https://dfhoughton.github.io</a
        >
      </footer>
    </div>
    <script>
      // construct a table of contents and related links
      const toc = document.getElementById("toc")
      document
        .querySelectorAll(
          ".content h2, .content h3, .content h4, .content h5, .content h6"
        )
        .forEach((n) => {
          const indentationLevel = Number.parseInt(n.nodeName.slice(1))
          n.classList.add(`m${indentationLevel - 1}`)
          const e = document.createElement("a")
          e.innerText = n.innerText
          e.classList.add("toc-link")
          e.setAttribute("title", `go to ${n.innerText}`)
          e.classList.add(`m${indentationLevel}`)
          e.setAttribute("href", "#")
          e.onclick = (e) => {
            e.preventDefault()
            n.scrollIntoView({ behavior: "smooth" })
          }
          toc.appendChild(e)
          const up = document.createElement("a")
          up.innerHTML = "&uarr;"
          up.setAttribute("href", "#toc")
          up.setAttribute("title", "return to table of contents")
          up.classList.add("up-link")
          up.onclick = (e) => {
            e.preventDefault()
            toc.scrollIntoView({ behavior: "smooth", block: "center" })
          }
          n.appendChild(up)
        })
      // move footnotes to the foot, etc.
      const footnotes = document.getElementById("footnotes")
      let fnIndex = 1
      document.querySelectorAll(".fn").forEach((n) => {
        const text = n.innerHTML
        n.innerHTML = ""
        n.classList.remove("fn")
        n.classList.add("fn-anchor")
        const topTag = document.createElement("span")
        topTag.classList.add("fn-tag")
        topTag.innerHTML = fnIndex
        n.appendChild(topTag)
        const bottomTag = document.createElement("span")
        bottomTag.classList.add("fn-tag")
        bottomTag.innerHTML = fnIndex
        fnIndex++
        const fn = document.createElement("div")
        fn.classList.add("fn-text")
        const tagContainer = document.createElement("span")
        tagContainer.appendChild(bottomTag)
        tagContainer.classList.add("fn-anchor")
        fn.appendChild(tagContainer)
        const txt = document.createElement("span")
        txt.innerHTML = text
        fn.appendChild(txt)
        topTag.onclick = (e) => {
          document
            .querySelectorAll(".fn-text .highlighted")
            .forEach((n) => n.classList.remove("highlighted"))
          txt.classList.add("highlighted")
          bottomTag.scrollIntoView({ behavior: "smooth" })
        }
        bottomTag.onclick = (e) => {
          txt.classList.remove("highlighted")
          topTag.scrollIntoView({ behavior: "smooth", block: "center" })
        }
        footnotes.appendChild(fn)
      })
    </script>
  </body>
</html>
